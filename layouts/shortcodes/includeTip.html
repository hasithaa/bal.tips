{{ $_hugo_config := `{ "version": 1 }` }}
{{ $filter := default "intersect" (.Get "filter")}}
{{ $Pages := slice }}
{{ if eq $filter "intersect"}}
  {{ $Pages = where (where $.Site.Pages "Params.Kind" "==" "tip") "Page.Params.tags" "intersect" .Page.Params.tags}}
{{else if eq $filter "union" }}
  {{ range $key, $tag := .Page.Params.tags }}
    {{ $Pages = $Pages | append (where (where $.Site.Pages "Params.Kind" "==" "tip") "Page.Params.tags" "intersect" (slice $tag)) }}
  {{ end }}
{{end}}
{{$Pages = uniq $Pages}}
<div class="tips page-view">
  <div class="tip round-box small-box">
    <h5>Related Tips</h5>
    <p></p>
    <div class="children children-div">
    {{ range $Pages.ByWeight }}
      <div><a href="#{{.LinkTitle}}">ğŸ’¡&nbsp;{{.Title}}</a></div>
    {{end}}
    </div>
  </div>
  {{ range $Pages.ByWeight}}
    {{ .Render "li" }}
  {{ end }}
</div>
