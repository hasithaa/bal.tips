{{ define "main" }}
    {{ if eq .Params.layout "single" }}
        {{ .Content }}
    {{ else}}
        {{ partial "metadata.html" . }}
        {{ .Content }}
        <div class="mt-5 row d-flex justify-content-center">
            {{ $images := default slice (shuffle $.Site.Params.images.defaultArticle)}}
            {{ range $page:= .Pages.ByWeight }}
            <div class="card m-1 col-md-3 text-center bg-transparent">
                <h4 class="card-header"><i class="bi bi-newspaper"></i>&nbsp;Article</h4>
                {{ if .Params.images}}
                    {{with .Params.images}}
                        {{ if gt (len .) 0 }}
                        <img src="{{index . 0}}" class="card-img-top img-fluid img-thumbnail" style="width: 100%; height: 150px; object-fit: cover;" alt="{{$page.Title}}"/>
                        {{end}}
                    {{end}}
                {{else if gt (len $images) 0}}
                    {{ $index := default 0 ($.Store.Get "index") }}
                    {{ if gt (len $images) $index }}
                        <img src="{{index $images $index}}" class="card-img-top img-fluid img-thumbnail" style="width: 100%; height: 150px; object-fit: scale-down;" alt="{{$page.Title}}"/>
                        {{ if eq (add $index 1) (len $images) }}
                            {{ $.Store.Set "index" 0 }}
                        {{else}}
                            {{ $.Store.Set "index" (add $index 1) }}
                        {{end}}
                    {{end}}
                {{end}}
                <div class="card-body p-2">
                    {{ if .Title}}
                    <h5 class="card-title mb-2">{{ .Title | safeHTML | markdownify }}</h5>
                    {{ else }}
                        {{ errorf "No title for %s" .Permalink }}
                    {{ end }}
                    <p>
                        {{ .Description | safeHTML | markdownify }}
                    </p>
                </div>
                <div class="card-footer text-muted">
                    <a href="{{.Permalink}}" class="my-2 btn btn-primary btn-sm">Read More</a>
                </div>
            </div>
            {{end}}
        </div>
    {{ end}}
{{ end }}